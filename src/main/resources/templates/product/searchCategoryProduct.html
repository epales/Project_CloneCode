<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>메인 페이지</title>
<head>
<th:block
	th:replace="/fragments/layouts/headerFragment.html :: headerFragment"></th:block>
</head>
<link rel="stylesheet" th:href="@{/css/product.css}">
<link rel="stylesheet" th:href="@{/css/search.css}">
<link rel="stylesheet" th:href="@{/css/detail.css}">
<link rel="stylesheet" th:href="@{/css/sellform.css}">	
<body style="overflow: auto;">
	<!-- 본문 글 -->
	<th:block th:replace="/fragments/layouts/nav.html :: fragment-nav"></th:block>
<div class="sc-PLyBE dxroHS">
			<div class="sc-dPNhBE fFEraQ">
				<div class="sc-kkwfeq eEIJod">	
					<div class="sc-izvnbC eqkhhY">
						<div class="sc-cbMPqi bdETmt">
							<div class="sc-gMcBNU ftXnvr">
								<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAkRJREFUSA3tlb9LHEEUx2/vzhQXESxsTau1aWxsFDkQA0ljEcv78RfY2EQbwT/hflU2KjGkCASRgI1FQEVstNU2QkD0YnXn5x03x7vZXXfnXGzMwPBm3pv5fubNj10vNUCpVCpDTNuibpfL5e8DSKTSrpME6nneDvOWqLv1en3RVUPGO4ENtN1uf2RukzrUarW+4l8QMZcSG2xBb9Lp9DSgdRbxBrtH5nkXsBdncAB0tlgsnstcYmuYL2z/A/UD/gPxR5VI8FNQI27g9P9lMpnFQqHwy8TC7JPgOFAjrOBNjmGBzA9NLMiGnrELVIR5VmuYdWqOc//Bmc/QDi2BGbtCtbrK/I5tz7PtRzpu2r6MnwMVUZX5ME/tZ6PRkNvvK30ZPxeq1VXmt/jnWdBvHe9lnCRUACrzEbr7ZP5egzsZW9AU7zFfKpX29cBB29Vq9Vv3S/cXjTkWdCpaWRsqTsA3Yk1hTI4nMmn6YZYzvUf4UseB/un2R9E9YCGzJHWWRXCF4DjOE6yI5/REaQsU0WPbb/dFA1/flqoxsqB7GJsk8jnLQ9/AITXFao4JTEk7pDQRv7BjzHmLb8L26z6LX4YlC+uUrGnEsQJlm3wZ1Wq1qTg7ohm9W62dL9H+D36JXe4wnC4Xt3eMi1SyV8fFemf7ovpOYMTGgVSiROPEY4GBydenGiXIc7uKGmPiscB8Bq+ZUDaTkrCv7zkFbjVn+kk+g0lsKS9hkuqTCgQzahW4b3CSjj4wt1J+2r0/SJKg7svoST4CXawe/d9nd+gAAAAASUVORK5CYII="
									width="15" height="15" alt="홈 아이콘">홈
							</div>
							<div class="sc-iLVFha lcCQQz">
								<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAAAXNSR0IArs4c6QAAAaVJREFUKBWFUz1LA0EQde9DIjaxSBNIG2shnR9whYVgIQqnjURikhP/QDqLVPoL9KJJEUHIgYggSFCs7K2tU6ZIrAwa73zvyB6bM8GB3Ox782Z2Z3YjZmCe5832er2WruvVYrH4Rm6aaQz0+/0ruC3f99v1en1xmpi85rpuNQiCfQL41HA4fGo0GhniSaYJIRZigQySnpGUivEhFKgqLmHwhzEBe7Ecx/lQee4QlEqlMsgbNYD1En4PGMicyodNI8nPZrN5+Ds1iPUKBnKLPk3JhwkElmUNk8nkHpIeZZAeR92Au4YPtVECg7Ztf5mmuY2kF2LFdmu12jmxUMho2Ww25weDQRtVlyOSYiHOxnaQwUQi4UMcSKz6PzuwQVS6h55njwycWy6Xj8Z2gIiYDY6JwbUw+mNm6/xIS6fTF1jnJaZHZU7NzuVyP8QGPzRM4RSVeYGqvWLUO5jetyTDI0FcgbgiyZHn09iE+FPlBZp0QPAoqr3jPlYLhUJXJbnmDmsxsgPx+iSxTDgYNcYGu4ZhUNyJFYlgeA98kXhknqZpJ//9RX8BYkCa7Y9z0J0AAAAASUVORK5CYII="
									width="6" height="10" alt="카테고리 선택 아이콘">
								<div class="sc-dYzWWc kprMUy">
									<div class="sc-iqzUVk hbAbwr">
											<div class="dropdown">
												<button class="dropbtn">
											    	<span th:text="${category1.CategoryName}"></span>
											    	<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAAXNSR0IArs4c6QAAASVJREFUOBGlks9qwkAQxrMLihRKQXyUHjx58dBLEXqxUPCavIKvkpCQgxcTD0LpSQQfoBfpRXwHj16av37fYWWrJhvqwDCbb2d+O5NdYcFc120hzIQQkW3bS2pNzPf9blEUC+ROUffNGkEYQWVZvuE7xfq9CRR1T8hfw5/hR/jIcZyN8DyPsDEEZUZoEASPeZ6vUNdXRYi/aOZVYjGHp9pGC4kRDmLHV4bOHrIs+7qAWYDtoW0lx+OYqDRCwzDsIO8TPtBPQv0PYEOMfGCHVhNoHMftJEl4YcMqGHWhb3JMjguNt64slVJOoH/AR0pk1DtT+h8gxQqoyj/HWzBuXgEpmqBVsEpgHbQOVgu8BTXBjEAdCthOPQ3qdxn+6QsedO8uyH+LT8nvvwPGjeHzAAAAAElFTkSuQmCC"
														width="10" height="6" alt="카테고리 화살표 아이콘">
											    </button>
											<div class="dropdown-content">
												<a th:href="@{searchCategory1(CATEGORY1=@{'패션'})}">패션</a>
												<a th:href="@{searchCategory1(CATEGORY1=@{'가전/디지털'})}">가전/디지털</a>
												<a th:href="@{searchCategory1(CATEGORY1=@{'도서'})}">도서</a>
												<a th:href="@{searchCategory1(CATEGORY1=@{'식품'})}">식품</a>	
											</div>
											</div>
									</div>
								</div>
							</div>
							<div class="sc-iLVFha lcCQQz" th:if="${categoryList2!=null}">
								<img
									src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAAAXNSR0IArs4c6QAAAaVJREFUKBWFUz1LA0EQde9DIjaxSBNIG2shnR9whYVgIQqnjURikhP/QDqLVPoL9KJJEUHIgYggSFCs7K2tU6ZIrAwa73zvyB6bM8GB3Ox782Z2Z3YjZmCe5832er2WruvVYrH4Rm6aaQz0+/0ruC3f99v1en1xmpi85rpuNQiCfQL41HA4fGo0GhniSaYJIRZigQySnpGUivEhFKgqLmHwhzEBe7Ecx/lQee4QlEqlMsgbNYD1En4PGMicyodNI8nPZrN5+Ds1iPUKBnKLPk3JhwkElmUNk8nkHpIeZZAeR92Au4YPtVECg7Ztf5mmuY2kF2LFdmu12jmxUMho2Ww25weDQRtVlyOSYiHOxnaQwUQi4UMcSKz6PzuwQVS6h55njwycWy6Xj8Z2gIiYDY6JwbUw+mNm6/xIS6fTF1jnJaZHZU7NzuVyP8QGPzRM4RSVeYGqvWLUO5jetyTDI0FcgbgiyZHn09iE+FPlBZp0QPAoqr3jPlYLhUJXJbnmDmsxsgPx+iSxTDgYNcYGu4ZhUNyJFYlgeA98kXhknqZpJ//9RX8BYkCa7Y9z0J0AAAAASUVORK5CYII="
									width="6" height="10" alt="카태고리 선택 아이콘">
								<div class="sc-dYzWWc kprMUy">
									<div class="sc-iqzUVk hbAbwr">
											<div class="dropdown">
												<button class="dropbtn">
												<span th:text="${category2.CategoryName}"></span>
													<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAAXNSR0IArs4c6QAAASVJREFUOBGlks9qwkAQxrMLihRKQXyUHjx58dBLEXqxUPCavIKvkpCQgxcTD0LpSQQfoBfpRXwHj16av37fYWWrJhvqwDCbb2d+O5NdYcFc120hzIQQkW3bS2pNzPf9blEUC+ROUffNGkEYQWVZvuE7xfq9CRR1T8hfw5/hR/jIcZyN8DyPsDEEZUZoEASPeZ6vUNdXRYi/aOZVYjGHp9pGC4kRDmLHV4bOHrIs+7qAWYDtoW0lx+OYqDRCwzDsIO8TPtBPQv0PYEOMfGCHVhNoHMftJEl4YcMqGHWhb3JMjguNt64slVJOoH/AR0pk1DtT+h8gxQqoyj/HWzBuXgEpmqBVsEpgHbQOVgu8BTXBjEAdCthOPQ3qdxn+6QsedO8uyH+LT8nvvwPGjeHzAAAAAElFTkSuQmCC"
													width="10" height="6" alt="카테고리 화살표 아이콘">
											    </button>
											<div class="dropdown-content">
												<a th:each="categoryL2 : ${categoryList2}" th:href="@{searchCategory2(CATEGORY2=${categoryL2})}" th:text="${categoryL2}"></a>
												
											</div>
											</div>
										
									</div>
								</div>
							</div>
							<div class="sc-iLVFha lcCQQz" th:if="${categoryList2!=null AND categoryList3!=null}">
								<img
									src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAAAXNSR0IArs4c6QAAAaVJREFUKBWFUz1LA0EQde9DIjaxSBNIG2shnR9whYVgIQqnjURikhP/QDqLVPoL9KJJEUHIgYggSFCs7K2tU6ZIrAwa73zvyB6bM8GB3Ox782Z2Z3YjZmCe5832er2WruvVYrH4Rm6aaQz0+/0ruC3f99v1en1xmpi85rpuNQiCfQL41HA4fGo0GhniSaYJIRZigQySnpGUivEhFKgqLmHwhzEBe7Ecx/lQee4QlEqlMsgbNYD1En4PGMicyodNI8nPZrN5+Ds1iPUKBnKLPk3JhwkElmUNk8nkHpIeZZAeR92Au4YPtVECg7Ztf5mmuY2kF2LFdmu12jmxUMho2Ww25weDQRtVlyOSYiHOxnaQwUQi4UMcSKz6PzuwQVS6h55njwycWy6Xj8Z2gIiYDY6JwbUw+mNm6/xIS6fTF1jnJaZHZU7NzuVyP8QGPzRM4RSVeYGqvWLUO5jetyTDI0FcgbgiyZHn09iE+FPlBZp0QPAoqr3jPlYLhUJXJbnmDmsxsgPx+iSxTDgYNcYGu4ZhUNyJFYlgeA98kXhknqZpJ//9RX8BYkCa7Y9z0J0AAAAASUVORK5CYII="
									width="6" height="10" alt="카태고리 선택 아이콘">
								<div class="sc-dYzWWc kprMUy">
									<div class="sc-iqzUVk hbAbwr">
											<div class="dropdown">
												<button class="dropbtn">
													<span th:text="${category3}"></span>
													<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAAXNSR0IArs4c6QAAASVJREFUOBGlks9qwkAQxrMLihRKQXyUHjx58dBLEXqxUPCavIKvkpCQgxcTD0LpSQQfoBfpRXwHj16av37fYWWrJhvqwDCbb2d+O5NdYcFc120hzIQQkW3bS2pNzPf9blEUC+ROUffNGkEYQWVZvuE7xfq9CRR1T8hfw5/hR/jIcZyN8DyPsDEEZUZoEASPeZ6vUNdXRYi/aOZVYjGHp9pGC4kRDmLHV4bOHrIs+7qAWYDtoW0lx+OYqDRCwzDsIO8TPtBPQv0PYEOMfGCHVhNoHMftJEl4YcMqGHWhb3JMjguNt64slVJOoH/AR0pk1DtT+h8gxQqoyj/HWzBuXgEpmqBVsEpgHbQOVgu8BTXBjEAdCthOPQ3qdxn+6QsedO8uyH+LT8nvvwPGjeHzAAAAAElFTkSuQmCC"
														width="10" height="6" alt="카테고리 화살표 아이콘">
											    </button>
											<div class="dropdown-content">
												<a th:each="categoryL3 : ${categoryList3}" th:href="@{searchCategory3(CATEGORY3=${categoryL3})}" th:text="${categoryL3}"></a>							
											</div>
											</div>
										
									</div>
								</div>
							</div>
						</div>
					</div>
		<div class="sc-iBEsjs TZWco" th:if=${Category==0} >
			<div th:each="categoryNameL2, status : ${categoryNameList2}" >
				<a class="sc-jKVCRD eNAQfa" th:href="@{searchCategory2(CATEGORY2=${categoryNameL2})}">
				<div class="sc-kaNhvL hvZmHh" th:text=${categoryNameL2}></div>
				<div class="sc-LKuAh dPgNEV" th:with="local=${status.index}">
					<span th:text="${countCategory2[local]}"></span>
				</div>
				</a>
			</div>
			<div></div>
		</div>
		
		<div class="sc-iBEsjs TZWco" th:if=${Category==1}>
			<div th:each="categoryNameL3, status : ${categoryNameList3}">
				<a class="sc-jKVCRD eNAQfa" th:href="@{searchCategory3(CATEGORY3=${categoryNameL3})}">
				<div class="sc-kaNhvL hvZmHh" th:text=${categoryNameL3}></div>
				<div class="sc-LKuAh dPgNEV" th:with="local=${status.index}">
					<span th:text="${countCategory3[local]}"></span>
				</div>
				</a>
			</div>
			<div></div>
		</div>
	<br>
	<div class="productSession">
		<h2>검색 결과</h2>
	</div>
	<br>
<div class="main">
      <div class="article-list" id="article-list">
      
      </div>
      <!-- Pagination List -->
      <ul class="article-list__pagination article-list__pagination--inactive"
        id="article-list-pagination" style="display:none;">
       </ul>
</div>
</div>
</div>
</div>
   <script type="text/javascript" th:inline="javascript">
    const articlesPerPageSize = 25;
    
    function getPageId(n) {
        return 'article-page-' + n;
    }
     
    function getDocumentHeight() {
        const body = document.body;
        const html = document.documentElement;
        
        return Math.max(
            body.scrollHeight, body.offsetHeight,
            html.clientHeight, html.scrollHeight, html.offsetHeight
        );
    };
     
    function getScrollTop() {
        return (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
    }
	
    function getArticle(art) {
    	
    	console.log(art.price);
        
        const div0 = document.createElement("div");
        const article = document.createElement("a");
        const div1 = document.createElement("div");
       	const img = document.createElement("img");
       	const div2 = document.createElement("div");
       	const div3 = document.createElement("div");
       	const div4 = document.createElement("div");
       	const p1 = document.createElement("p");
       	const div5 = document.createElement("div");
       	const div6 = document.createElement("div");
       	const b1 = document.createElement("b");
       	const div7 = document.createElement("div");
       	const span1 = document.createElement("span");
       	
       	div0.className="productform";
       	
        article.className = 'aClass';
        article.href = "/product_detail?P_ID="+art.p_ID;
         
        img.src = "/image/"+art.image1;
        img.className = "imageClass";
        img.style.width = '194px';
        img.style.height = '194px';
        
        div1.className="imageBlock";
        
        div2.className="middleBlock";
        
        div3.className="titleBlock";
        
        div4.className="titleText";
        
        p1.textContent=art.p_TITLE;
        
        div5.className="priceBlock";
        
        div6.className="priceText";
        
        b1.textContent=art.price;
        
        div7.className="timeStamp";
        
        span1.textContent=art.p_DATE;
        
        div0.appendChild(article);
        article.appendChild(div1);
        div1.appendChild(img);
        div1.appendChild(div2);
        article.appendChild(div3);
        div3.appendChild(div4);
        div4.appendChild(p1);
        div3.appendChild(div5);
        div5.appendChild(div6);
        div6.appendChild(b1);
        div5.appendChild(div7);
        div7.appendChild(span1);
        return div0;
    }

    function addPaginationPage(page) {
        const pageLink = document.createElement('a');
        pageLink.href = '#' + getPageId(page);
        pageLink.innerHTML = page;
        
        const listItem = document.createElement('li');
        listItem.className = 'article-list__pagination__item';
        listItem.appendChild(pageLink);
        
        articleListPagination.appendChild(listItem);
        
        if (page === 2) {
            articleListPagination.classList.remove('article-list__pagination--inactive');
        }
    }
     

    function addPage(page) {
    	$.ajax({
            type: 'GET',
            url: '/search/scroll/category/list',
            data: {
              page: page, // current Page
              size: articlesPerPageSize, // max page size
              message: [[${message}]]
            },
            dataType: 'json',
          }).done(function (result) {
            if (result.length == 0) {
              return;
            }
            const pageElement = document.createElement('div');
            pageElement.id = getPageId(page);
            pageElement.className = 'productSession';
            const div10 = document.createElement('div');
            div10.className = "mainform";
            pageElement.appendChild(div10);
            for (var i = 0; i < result.length; i++) {
            	div10.appendChild(getArticle(result[i]));
            }
            articleList.appendChild(pageElement);
        addPaginationPage(page);
       });
    }
     
    const articleList = document.getElementById('article-list');
    const articleListPagination = document.getElementById('article-list-pagination');
    
    let page = 0;
     
    addPage(page++);
     
    window.onscroll = function() {
    	if (getScrollTop() > getDocumentHeight() - window.innerHeight-400){
    		
        	didScroll = true;
    	
    	 return; 
    	}
    	
    }
    
    setInterval(function() {
        if (didScroll) {
            hasScrolled();
            didScroll = false;
        }
    }, 3000);
    function hasScrolled() {
    	addPage(page++)
    }

    </script>
	<th:block
		th:replace="/fragments/layouts/footerFragment.html :: footerFragment"></th:block>
</body>
</html>